<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="format-detection" content="telephone=no,email=no" />
<meta name="ML-Config" content="fullscreen=yes,preventMove=no" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<script src="js/lib/jquery-1.11.3.min.js"></script>
<script src="js/lib//jweixin-1.0.0.js"></script>
<script src="./function.js"></script>
</head>
<body>
微信自定义，动态修改分享内容;
<input id="btn_share" type="button" name="" value="微信动态分享">


<script type="text/javascript">
$(function(){
$("#btn_share").on("click",function(){
    //需要调用时执行这个方法。
    var url = 'http://www.baidu.com';//用户要分享的网址
    var title  = '神奇的百度';//分享的标题
    var shareimg = 'https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/logo_white_fe6da1ec.png';//分享的图片
    console.log("ssssss---shareing");
    var desc = '神奇的百度';//分享的描述信息

    WeChat(url,title,img,desc);

})


})    

</script>

<script type="text/javascript">
function WeChat(url,title,img,desc){
     $.get("./ajax_getconfig.php",{url:window.location.href},function(data) {
          
        wx.config(data);
        wx.ready(function () {
        // 在这里调用 API
        wx.onMenuShareTimeline({  //例如分享到朋友圈的API 
        title: title, // 分享标题
        link: url, // 分享链接
        imgUrl: img, // 分享图标
        success: function () {
        },
        cancel: function () {
        // 用户取消分享后执行的回调函数
        }
        });
 
        wx.onMenuShareAppMessage({
        title: title, // 分享标题
        desc: desc, // 分享描述
        link: url, // 分享链接
        imgUrl: img, // 分享图标
        type: '', // 分享类型,music、video或link，不填默认为link
        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        success: function () {
        },
        cancel: function () {
        // 用户取消分享后执行的回调函数
        }
        });
        wx.error(function (res) {
 
        alert(res.errMsg);  //打印错误消息。及把 debug:false,设置为debug:ture就可以直接在网页上看到弹出的错误提示
 
        });
        });
    },
    "json"
    );
}
 

</script>
</body>
</html>